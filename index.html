<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>MetaToRI 로그인</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700&display=swap" rel="stylesheet">
  <style>
    html,body {margin:0; padding:0; width:100vw; height:100vh;}
    body {
      background:linear-gradient(130deg,#22293a 30%,#181b24 80%);
      min-height:100vh;
      font-family:'Orbitron','Pretendard',sans-serif;
      color:#f2f7ff;
      overflow-x:hidden;
      position:relative;
      font-size: 17px;
    }
    #particles {
      position:fixed; left:0; top:0; width:100vw; height:100vh; z-index:0; pointer-events:none;
    }
    .center-wrap {
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      min-height:100vh; width:100vw; position:relative; z-index:2;
    }
    .intro-group {
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      gap:20px;
      transition:all 1.1s cubic-bezier(.7,0,.3,1);
      position:relative; z-index:3; will-change:transform;
    }
    .intro-group.shrink {
      transform: translateY(-58px) scale(0.68);
      filter:blur(0.3px);
      margin-bottom: -10px;
    }
    .intro-logo {
      width:78px; height:78px;
      border-radius:18px;
      box-shadow:0 0 40px #74f6ff88,0 0 40px #da20ff66;
      margin-bottom:2px;
      background:rgba(40,80,180,0.04);
      opacity:0; transform:scale(0.8);
      animation:popAppear .7s .2s both;
    }
    .intro-group .intro-title {
      font-size:2.22em; font-weight:900;
      margin-bottom:0; margin-top:0;
      background:linear-gradient(92deg,#81a4ff 0%,#ab7cff 65%,#ff7ab7 100%);
      -webkit-background-clip:text; -webkit-text-fill-color:transparent;
      letter-spacing:3px; text-align:center;
      text-shadow:0 0 22px #ab7cff,0 0 8px #81a4ffbb;
      opacity:0; transform:scale(0.8);
      animation:popAppear .6s .8s both;
    }
    .intro-group .intro-slogan {
      color:#38e0ff; font-size:1.08em; font-weight:700; letter-spacing:1.2px;
      text-align:center; margin-top:0; margin-bottom:0;
      text-shadow:0 0 12px #ff7ab7bb,0 0 5px #6dffd399;
      opacity:0; transform:scale(0.8);
      animation:popAppear .6s 1.4s both;
    }
    @keyframes popAppear {
      0% {opacity:0; transform:scale(0.8);}
      80% {opacity:1; transform:scale(1.05);}
      100% {opacity:1; transform:scale(1);}
    }
    /* 로그인 폼 */
    .login-box {
      background:rgba(30,35,60,0.95);
      box-shadow:0 0 44px #24f6ff18, 0 0 20px #da20ff11, 0 2px 40px #38e0ff33;
      border-radius:26px;
      border:2.1px solid #38e0ff44;
      display:flex; flex-direction:column; align-items:center;
      padding:2.0em 1.25em 1.6em 1.25em;
      min-width:220px; width:90vw; max-width:375px;
      position:relative; margin:0 auto;
      opacity:0; transform:translateY(55px) scale(0.93);
      pointer-events:none;
      transition:all .7s cubic-bezier(.7,0,.3,1);
      z-index:4;
      margin-top:-10px;
    }
    .login-box.show {
      opacity:1; transform:translateY(0) scale(1);
      pointer-events:auto;
      transition:all .8s cubic-bezier(.7,0,.3,1);
    }
    .login-box.spinout {
      animation: loginSpinOut 1.3s cubic-bezier(.7,0,.3,1.2) both;
    }
    @keyframes loginSpinOut {
      0% {transform:scale(1) rotate(0);}
      10% {transform:scale(0.96) rotate(18deg);}
      40% {transform:scale(1.17) rotate(-28deg);}
      70% {transform:scale(1.07) rotate(360deg);}
      100% {opacity:0;transform:scale(1.2) rotate(360deg);}
    }
    .login-title {
      color:#81a4ff; font-size:1.13em; font-weight:700; letter-spacing:.02em;
      margin-bottom:17px; margin-top:3px; text-align:center;
      text-shadow:0 0 10px #38e0ff40;
    }
    .input-field {
      display:block; width:100%; font-size:1.09em; border-radius:15px;
      border:2px solid #24f6ff77; background:rgba(255,255,255,0.09);
      color:#f3f4fa; padding:13px 1em; margin-bottom:1.05em;
      outline:none; box-shadow:0 0 11px #6dffd388;
      transition:border .23s, box-shadow .23s;
      text-align:center;
      font-family:'Pretendard',sans-serif;
      font-weight:500;
      letter-spacing:0.01em;
    }
    .input-field:focus {
      border:2px solid #ab7cff;
      box-shadow:0 0 18px #ab7cff44;
      background:rgba(255,255,255,0.13);
    }
    .login-btn {
      width:100%; padding:13px 0; font-size:1.13em; color:#fff;
      background:linear-gradient(90deg,#24f6ff 0,#da20ff 100%);
      border:none; border-radius:100px;
      box-shadow:0 0 22px #24f6ff, 0 0 33px #da20ff66;
      cursor:pointer; font-family:inherit;
      font-weight:700; letter-spacing:.01em;
      margin-top:0.5em; margin-bottom:0.1em;
      transition:transform 0.13s, box-shadow 0.2s;
      outline:none;
    }
    .login-btn:active {transform:scale(0.97);}
    #fireworks {
      pointer-events: none;
      position: fixed;
      left: 0; top: 0;
      width: 100vw; height: 100vh;
      z-index: 999;
      display: none;
    }
    @media (max-width:540px){
      .login-box {padding:1.2em 0.4em 1.0em 0.4em;}
      .intro-title{font-size:1.16em;}
      body { font-size: 15px;}
    }
  </style>
</head>
<body>
  <canvas id="particles"></canvas>
  <canvas id="fireworks"></canvas>
  <div class="center-wrap">
    <div class="intro-group" id="introGroup">
      <img src="https://raw.githubusercontent.com/pageno/MetaToRI-Assets/main/Logo.png" alt="로고" class="intro-logo" id="logoEl">
      <div class="intro-title" id="titleEl">MetaToRI World</div>
      <div class="intro-slogan" id="sloganEl">Dream Never Fades</div>
    </div>
    <form class="login-box" id="loginBox" autocomplete="off">
      <div class="login-title">지갑 주소와 비밀번호로 로그인</div>
      <input type="text" class="input-field" id="walletAddress" placeholder="지갑 주소를 입력하세요" required>
      <input type="password" class="input-field" id="password" placeholder="비밀번호를 입력하세요" required>
      <button type="submit" class="login-btn" id="loginBtn">로그인</button>
    </form>
  </div>
  <script>
    // 네온 파티클 배경
    const canvas = document.getElementById('particles');
    const ctx = canvas.getContext('2d');
    let particles = [];
    let w = window.innerWidth, h = window.innerHeight;
    function resizeCanvas() { w = window.innerWidth; h = window.innerHeight; canvas.width = w; canvas.height = h; }
    window.addEventListener('resize', resizeCanvas); resizeCanvas();
    function randomColor() {
      const colors = ['#2cdcff', '#d720ff', '#ffde59', '#66f2ff', '#ff00cc', '#a3ffe8'];
      return colors[Math.floor(Math.random() * colors.length)];
    }
    function createParticle() {
      return {
        x: Math.random() * w, y: Math.random() * h,
        r: Math.random() * 2.2 + 1.2,
        dx: (Math.random() - 0.5) * 0.6,
        dy: Math.random() * 1 + 0.2,
        alpha: Math.random() * 0.7 + 0.3,
        color: randomColor()
      }
    }
    function animateParticles() {
      ctx.clearRect(0, 0, w, h);
      for (let i = 0; i < particles.length; i++) {
        let p = particles[i];
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, 2 * Math.PI);
        ctx.fillStyle = p.color;
        ctx.globalAlpha = p.alpha;
        ctx.shadowColor = p.color;
        ctx.shadowBlur = 16;
        ctx.fill();
        ctx.globalAlpha = 1;
        p.y += p.dy; p.x += p.dx; p.alpha -= 0.0015;
        if (p.y > h + 10 || p.alpha < 0.15) {
          particles[i] = createParticle(); particles[i].y = -10;
        }
      }
      requestAnimationFrame(animateParticles);
    }
    for (let i = 0; i < 44; i++) particles.push(createParticle());
    animateParticles();

    // 인트로 등장 순차 애니메이션
    document.getElementById('logoEl').style.opacity = 0;
    document.getElementById('titleEl').style.opacity = 0;
    document.getElementById('sloganEl').style.opacity = 0;
    setTimeout(() => { document.getElementById('logoEl').style.opacity = 1; }, 160);
    setTimeout(() => { document.getElementById('titleEl').style.opacity = 1; }, 700);
    setTimeout(() => { document.getElementById('sloganEl').style.opacity = 1; }, 1300);

    // 위로 shrink, 로그인 박스 등장(간격 조정)
    setTimeout(() => {
      document.getElementById('introGroup').classList.add('shrink');
      setTimeout(() => { document.getElementById('loginBox').classList.add('show'); }, 740);
    }, 2100);

    // ========== 로그인시 회전+폭죽 효과 ========== //
    const loginBox = document.getElementById('loginBox');
    const fireCanvas = document.getElementById('fireworks');
    const fireCtx = fireCanvas.getContext('2d');
    let fwWidth = window.innerWidth, fwHeight = window.innerHeight;
    function resizeFire() { fwWidth = window.innerWidth; fwHeight = window.innerHeight; fireCanvas.width = fwWidth; fireCanvas.height = fwHeight; }
    window.addEventListener('resize', resizeFire); resizeFire();

    function boomFireworks(centerX, centerY, colorArr) {
      fireCanvas.style.display = "block";
      let particles = [];
      for(let c=0; c<colorArr.length; c++) {
        for(let i=0;i<13;i++){
          const angle = (2*Math.PI/13)*i;
          const speed = 3.5 + Math.random()*2;
          particles.push({
            x:centerX, y:centerY,
            dx:Math.cos(angle)*speed*(0.7+0.6*Math.random()),
            dy:Math.sin(angle)*speed*(0.8+0.6*Math.random()),
            r:4+Math.random()*3,
            alpha:1,
            color:colorArr[c]
          });
        }
      }
      let ticks=0;
      function animFire(){
        fireCtx.clearRect(0,0,fwWidth,fwHeight);
        for(let p of particles){
          fireCtx.globalAlpha = p.alpha;
          fireCtx.beginPath();
          fireCtx.arc(p.x,p.y,p.r,0,2*Math.PI);
          fireCtx.fillStyle = p.color;
          fireCtx.shadowBlur = 30; fireCtx.shadowColor = p.color;
          fireCtx.fill();
          p.x += p.dx; p.y += p.dy;
          p.alpha -= 0.013; // 더 느리게 사라짐
        }
        ticks++;
        if(ticks<85) requestAnimationFrame(animFire);
        else {
          fireCtx.clearRect(0,0,fwWidth,fwHeight);
          fireCanvas.style.display="none";
        }
      }
      animFire();
    }

    loginBox.addEventListener('submit', function(e){
      e.preventDefault();
      if(!loginBox.classList.contains('spinout')){
        loginBox.classList.add('spinout');

        // 폭죽 위치: 로그인박스의 화면 중앙
        const rect = loginBox.getBoundingClientRect();
        const cx = rect.left + rect.width/2;
        const cy = rect.top + rect.height/2;
        boomFireworks(cx, cy, ['#38e0ff','#d720ff','#ffe869','#fff','#6cf6ff']);

        setTimeout(()=>{
          loginBox.style.display='none';
          // → 여기서 다음 화면 이동! (예: location.href="home.html";)
        }, 1310);
      }
    });
  </script>
</body>
</html>
